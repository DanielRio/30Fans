@using _30Fans.Resources.Dynamic;
@model Domain.Category

@{
    ViewBag.Title = Model.CategoryName;
    Layout = "~/Views/Shared/_NewLayout.cshtml";
}

@section breadcumb {
    @Html.ActionLink("30Fans", string.Empty, "Home", null, new { @class = "teste" })  <text>>></text>
    @Categories.ResourceManager.GetObject(@Model.CategoryName)
}

<h1 class="stylizedH1">@Categories.ResourceManager.GetObject(@Model.CategoryName)</h1>
<table class="CategoryList">

@{ 
    int numCols = 4;
    int colsCount = 0;
}

@foreach (var item in Model.Items.OrderByDescending(x => x.Priority).ToList()) {
    var imageUrl = item.ImageUrl;
    var urlItem = "/Category/Item/" + @item.Id;
    if ((colsCount % numCols) == 0) {
        @:<tr>
    }
        <td>
            <a href="@urlItem">
                <img class="imageShadow" alt="" src="@imageUrl" />
                <div>@CategoriesItem.ResourceManager.GetObject(item.ItemName)</div>
            </a>
        </td>
    colsCount++;
    if (colsCount == numCols){
        @:</tr>
        colsCount = 0;
    }    
}

</table>
